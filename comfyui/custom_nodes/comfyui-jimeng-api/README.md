# ComfyUI 即梦 API 插件

这是一个 ComfyUI 自定义节点插件，用于集成火山引擎即梦图像生成 API。

## 功能特性

- ✅ 支持文本到图像生成
- ✅ 支持的图像尺寸 (512x512, 768x768, 1024x1024)
- ✅ **无水印图像输出** - 使用 base64 格式获取无水印图像
- ✅ 简化的参数配置 - 只需要提示词和 API Key
- ✅ 错误处理和异常恢复
- ✅ 基于实际 API 测试的可靠实现

## 安装方法

1. 将此插件文件夹复制到 ComfyUI 的 `custom_nodes` 目录下
2. 重启 ComfyUI
3. 在节点菜单中找到 "即梦 API" 分类

## 使用方法

### 1. 获取 API 密钥

1. 访问 [火山引擎控制台](https://console.volcengine.com/)
2. 开通火山方舟大模型服务
3. 获取 API Key

### 2. 配置节点

在 ComfyUI 中添加 "即梦图像生成" 节点，配置以下参数：

#### 必需参数
- **prompt**: 图像生成提示词
- **api_key**: 火山引擎 API Key
- **model**: 模型选择 (默认: doubao-seedream-3-0-t2i-250415)
- **size**: 图像尺寸 (支持选项: 512x512, 768x768, 1024x1024)

### 3. 连接输出

节点输出一个 IMAGE 类型，可以连接到：
- SaveImage 节点保存图像
- PreviewImage 节点预览图像
- 其他图像处理节点

## 示例工作流

```
即梦图像生成 → SaveImage
```

## 注意事项

1. **API 配额**: 请注意火山引擎的 API 调用配额和计费
2. **网络连接**: 确保 ComfyUI 可以访问互联网
3. **密钥安全**: 不要在工作流文件中硬编码 API 密钥
4. **错误处理**: 如果 API 调用失败，节点会返回红色错误图像

## 支持的模型

- doubao-seedream-3-0-t2i-250415 (默认)

## 故障排除

### 常见问题

1. **API 密钥错误**
   - 检查 API Key 是否正确
   - 确认已开通相应的模型服务

2. **网络连接问题**
   - 检查网络连接
   - 确认防火墙设置

3. **图像生成失败**
   - 检查提示词是否符合内容政策
   - 尝试调整生成参数

### 调试信息

插件会在 ComfyUI 控制台输出详细的错误信息，请查看控制台日志进行故障排除。

## 更新日志

### v1.0.0
- 初始版本
- 支持基本的文本到图像生成
- 支持参数配置和错误处理

## 许可证

MIT License

## 贡献

欢迎提交 Issue 和 Pull Request！

## 相关链接

- [火山引擎官网](https://www.volcengine.com/)
- [火山方舟大模型服务](https://www.volcengine.com/product/ark)
- [ComfyUI 官网](https://github.com/comfyanonymous/ComfyUI)
