(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4489:(e,t,a)=>{Promise.resolve().then(a.bind(a,7990))},7990:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(5155),r=a(2115);function o(){let[e,t]=(0,r.useState)(()=>{{let e=localStorage.getItem("emoscan-theme");if(e&&("dark"===e||"light"===e))return e}return"dark"}),[a,n]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{n(!0)},[]),(0,r.useEffect)(()=>{if(!a)return;let t=document.documentElement;t.classList.remove("dark","light"),t.classList.add(e),t.setAttribute("data-theme",e),localStorage.setItem("emoscan-theme",e),console.log("Theme applied:",e,"Classes:",t.classList.toString(),"Data-theme:",t.getAttribute("data-theme"))},[e,a]),{theme:e,setTheme:t,toggleTheme:()=>{t(e=>"dark"===e?"light":"dark")},isDark:"dark"===e,isLight:"light"===e,mounted:a}}function s(){let{theme:e,toggleTheme:t,isDark:a,mounted:r}=o();return r?(0,n.jsxs)("button",{onClick:()=>{console.log("Theme toggle clicked, current theme:",e),console.log("Document classes before:",document.documentElement.classList.toString()),t(),setTimeout(()=>{console.log("Document classes after:",document.documentElement.classList.toString())},100)},className:"\n        relative inline-flex items-center justify-center\n        w-12 h-6 rounded-full transition-all duration-300\n        ".concat(a?"bg-green-600/30 border border-green-400/50 hover:bg-green-600/40":"bg-gray-300 border border-gray-400 hover:bg-gray-400","\n        focus:outline-none focus:ring-2 focus:ring-offset-2\n        ").concat(a?"focus:ring-green-400":"focus:ring-blue-400","\n      "),title:"切换到".concat(a?"浅色":"深色","主题"),children:[(0,n.jsx)("div",{className:"\n          absolute w-4 h-4 rounded-full transition-all duration-300 transform\n          ".concat(a?"translate-x-3 bg-green-400 shadow-lg shadow-green-400/50":"-translate-x-3 bg-white shadow-lg","\n        ")}),(0,n.jsxs)("div",{className:"flex items-center justify-between w-full px-1",children:[(0,n.jsx)("div",{className:"text-xs transition-opacity duration-300 ".concat(a?"opacity-50":"opacity-100"),children:"☀️"}),(0,n.jsx)("div",{className:"text-xs transition-opacity duration-300 ".concat(a?"opacity-100":"opacity-50"),children:"\uD83C\uDF19"})]})]}):(0,n.jsx)("button",{className:"w-12 h-6 rounded-full bg-gray-300 border border-gray-400 animate-pulse",disabled:!0,title:"加载中..."})}var l=function(e){return e.QUICK="quick",e.DETAILED="detailed",e}(l||{});function c(){let{isDark:e,mounted:t}=o(),[a,l]=(0,r.useState)(!1),[c,i]=(0,r.useState)(!1),[d,m]=(0,r.useState)(0),[u,h]=(0,r.useState)([]),[g,f]=(0,r.useState)([{emotion:"Happy",percentage:0,color:"#00ff88"},{emotion:"Sad",percentage:0,color:"#0099ff"},{emotion:"Angry",percentage:0,color:"#ff0066"},{emotion:"Surprised",percentage:0,color:"#ffaa00"},{emotion:"Neutral",percentage:0,color:"#888888"},{emotion:"Disgusted",percentage:0,color:"#9d4edd"},{emotion:"Fearful",percentage:0,color:"#f72585"}]),[p,x]=(0,r.useState)(""),[v,b]=(0,r.useState)(0),[y,N]=(0,r.useState)("--:--:--"),[w,j]=(0,r.useState)("quick"),{displayText:E,isTyping:A,showCursor:S,typingProgress:I}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50,[a,n]=(0,r.useState)(""),[o,s]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!0),[i,d]=(0,r.useState)(0);return(0,r.useEffect)(()=>{let a;if(!e){n(""),s(!1);return}s(!0),n("");let r=0,o=()=>{if(r<e.length){n(t=>e.slice(0,r+1)),d(r/e.length);let s=t,l=e[++r-1];"\n"===l?s=1.5*t:" "===l?s=.7*t:/[.!?]/.test(l)?s=2*t:/[,;:]/.test(l)&&(s=1.2*t),s+=(Math.random()-.5)*t*.2,a=window.setTimeout(o,Math.max(20,s))}else s(!1)};return a=window.setTimeout(o,200),()=>{a&&clearTimeout(a)}},[e,t]),(0,r.useEffect)(()=>{if(o){let e=setInterval(()=>{c(e=>!e)},500);return()=>clearInterval(e)}c(!1)},[o]),{displayText:a,isTyping:o,showCursor:l,typingProgress:i}}(p,25),T=(0,r.useRef)(null),D=(0,r.useRef)(null),M=(0,r.useRef)(null),C=(0,r.useRef)(null),k=(0,r.useRef)(!1),O=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(C.current){if(A)C.current.scrollTop=C.current.scrollHeight;else if(E&&!A){let e=setTimeout(()=>{let e=C.current;if(e){let t=e.scrollTop,a=performance.now(),n=r=>{let o=Math.min((r-a)/2e3,1);e.scrollTop=t*(1-(o<.5?4*o*o*o:1-Math.pow(-2*o+2,3)/2)),o<1&&requestAnimationFrame(n)};requestAnimationFrame(n)}},1e3);return()=>clearTimeout(e)}}},[E,A]),(0,r.useEffect)(()=>{let e=setInterval(()=>{b(e=>(e+1)%100)},50);return()=>clearInterval(e)},[]),(0,r.useEffect)(()=>{if(!t)return;let e=()=>{N(new Date().toLocaleTimeString())};e();let a=setInterval(e,1e3);return()=>clearInterval(a)},[t]),(0,r.useEffect)(()=>{if(C.current){let e;let t=C.current;t.style.setProperty("scrollbar-width","none","important"),t.style.setProperty("-ms-overflow-style","none","important");let a=document.createElement("style");a.textContent="\n        .ai-output-container::-webkit-scrollbar {\n          display: none !important;\n          width: 0 !important;\n          height: 0 !important;\n        }\n\n        /* 3D圆柱体透视文字容器 */\n        .cylindrical-text-container {\n          position: relative;\n          perspective: 1200px;\n          transform-style: preserve-3d;\n          overflow: hidden;\n        }\n\n        /* 每行文字的基础样式 */\n        .text-line {\n          display: block;\n          text-align: center;\n          font-family: 'Courier New', monospace;\n          white-space: pre-wrap;\n          transition: all 0.08s ease-out;\n          transform-origin: center center;\n        }\n\n        /* 滚动容器优化 */\n        .ai-output-container {\n          scroll-behavior: smooth; /* 恢复平滑滚动 */\n          will-change: scroll-position;\n          -webkit-overflow-scrolling: touch;\n          /* 确保可以正常选择文本 */\n          user-select: text;\n          -webkit-user-select: text;\n          -moz-user-select: text;\n          -ms-user-select: text;\n          /* 确保滚动正常工作 */\n          overflow-y: auto;\n          overflow-x: hidden;\n        }\n\n        /* 移除阻止滚动的伪元素 */\n      ",document.head.appendChild(a);let n=()=>{e&&cancelAnimationFrame(e),e=requestAnimationFrame(()=>{let e=t.querySelectorAll(".text-line");if(0===e.length)return;let a=t.getBoundingClientRect(),n=a.height/2;e.forEach(e=>{let t=e.getBoundingClientRect(),r=Math.pow(Math.min(Math.abs(t.top+t.height/2-a.top-n)/n,1),.8),o=1-.6*r;e.style.fontSize="".concat(16-5*r,"px"),e.style.opacity="".concat(o),e.style.width="".concat(100-25*r,"%"),e.style.margin="0 auto",e.style.transform="translateZ(".concat(-(25*r),"px) rotateX(").concat(6*r,"deg)");let s=window.getComputedStyle(document.documentElement),l=s.getPropertyValue("--emoscan-text").trim(),c=s.getPropertyValue("--emoscan-accent").trim();document.documentElement.classList.contains("dark")?(e.style.color="hsla(".concat(c,", ").concat(o,")"),e.style.textShadow="0 0 ".concat(12*o,"px hsla(").concat(c,", ").concat(.5*o,"),\n                 0 ").concat(1.5*o,"px ").concat(6*o,"px rgba(0,0,0,0.3),\n                 0 0 ").concat(25*o,"px hsla(").concat(c,", ").concat(.25*o,")")):(e.style.color="hsla(".concat(l,", ").concat(o,")"),e.style.textShadow="0 ".concat(+o,"px ").concat(3*o,"px rgba(0,0,0,0.2)"))})})},r=()=>{setTimeout(()=>{n()},50)};t.addEventListener("scroll",n,{passive:!0}),t.addEventListener("selectstart",e=>{e.stopPropagation()},{passive:!0}),t.addEventListener("mousedown",e=>{e.detail>1&&e.stopPropagation()},{passive:!0});let o=new MutationObserver(()=>{r()});return o.observe(t,{childList:!0,subtree:!0,characterData:!0}),r(),()=>{t.removeEventListener("scroll",n),o.disconnect(),document.head.removeChild(a),e&&cancelAnimationFrame(e)}}},[]),(0,r.useEffect)(()=>()=>{M.current&&M.current.getTracks().forEach(e=>e.stop())},[]);let L=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({video:{width:640,height:480}});M.current=e,T.current&&(T.current.srcObject=e)}catch(e){console.error("Error accessing camera:",e)}},P=()=>{M.current&&(M.current.getTracks().forEach(e=>e.stop()),M.current=null),T.current&&(T.current.srcObject=null)},R=()=>{if(T.current&&D.current){let e=D.current,t=T.current;e.width=t.videoWidth,e.height=t.videoHeight;let a=e.getContext("2d");if(a)return a.drawImage(t,0,0),e.toDataURL("image/jpeg")}return null},F=async()=>{l(!0),h([]),m(0),x(""),await L();let e=setInterval(()=>{let t=R();t&&h(a=>{let n={id:a.length+1,url:t,analyzing:!0},r=[...a,n];return r.length>=5&&(clearInterval(e),U(r)),r})},800)},U=async e=>{let t=Math.random().toString(36).substr(2,9);if(l(!1),i(!0),P(),"detailed"===w){await _(e);return}if(e.length>0){let a=e[e.length-1];if(a.url)try{let n=await fetch(a.url),r=await n.blob();await G(r,t),i(!1),e.forEach((e,t)=>{setTimeout(()=>{h(e=>e.map((e,a)=>a===t?{...e,analyzing:!1}:e))},(t+1)*200)});return}catch(e){console.error("快速模式图像转换失败:",e)}}console.log("执行fallback逻辑，使用模拟数据");let a=0,n=setInterval(()=>{(a+=15*Math.random())>=100&&(a=100,clearInterval(n),Y(),i(!1)),m(a)},200);e.forEach((e,t)=>{setTimeout(()=>{h(e=>e.map((e,a)=>a===t?{...e,analyzing:!1}:e))},(t+1)*1e3)})},_=async e=>{try{if(!await z()){console.log("API不可用，使用模拟数据"),Y(),i(!1),e.forEach((e,t)=>{setTimeout(()=>{h(e=>e.map((e,a)=>a===t?{...e,analyzing:!1}:e))},(t+1)*200)});return}let n=new FormData;for(let t=0;t<e.length;t++){let a=e[t];if(a.url){let e=await fetch(a.url),r=await e.blob();n.append("files",r,"capture_".concat(t+1,".jpg"))}}let r=await fetch("http://localhost:8000/api/v1/analyze/batch",{method:"POST",body:n});if(!r.ok)throw Error("批量API调用失败: ".concat(r.status));let o=await r.json();if(o.success){f(o.emotion_data);let e=o.analysis_text;try{let n=await fetch("http://localhost:8000/api/v1/generation/generate-from-analysis",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emotion_data:o.emotion_data,seed:Math.floor(1e6*Math.random())})});if(n.ok){let r=await n.json();if(e+="\n\n"+"━".repeat(80)+"\n",e+=">>> COMFYUI IMAGE GENERATION <<<\n\n",r.success){var t,a;e+="✅ 图像生成成功!\n",e+="\uD83C\uDFA8 生成时间: ".concat(null===(t=r.generation_time)||void 0===t?void 0:t.toFixed(2),"秒\n"),e+="\uD83D\uDCF8 生成图像: ".concat((null===(a=r.images)||void 0===a?void 0:a.length)||0,"张\n"),r.images&&r.images.length>0&&(e+="\n生成的图像:\n",r.images.forEach((t,a)=>{e+="".concat(a+1,". ").concat(t.filename,"\n"),e+="   URL: ".concat(t.url,"\n")}))}else e+="❌ 图像生成失败: ".concat(r.error_message,"\n"),e+="\uD83D\uDCA1 提示: 请检查ComfyUI服务是否正常运行\n"}else e+="\n\n"+"━".repeat(80)+"\n",e+=">>> COMFYUI IMAGE GENERATION <<<\n\n",e+="❌ 图像生成API调用失败: ".concat(n.status,"\n")}catch(t){console.warn("图像生成失败，但情绪分析成功:",t),e+="\n\n"+"━".repeat(80)+"\n",e+=">>> COMFYUI IMAGE GENERATION <<<\n\n",e+="❌ 图像生成异常: ".concat(t,"\n")}x(e)}else{let e=">>> 批量API调用失败 <<<\n\n错误信息: ".concat(o.error_message||"未知错误","\n\n请检查后端服务是否正常运行。");x(e),Y()}i(!1),e.forEach((e,t)=>{setTimeout(()=>{h(e=>e.map((e,a)=>a===t?{...e,analyzing:!1}:e))},(t+1)*200)})}catch(t){console.error("批量API调用异常:",t),x(">>> 批量分析连接失败 <<<\n\n错误信息: ".concat(t,"\n\n正在使用模拟数据进行演示...")),Y(),i(!1),e.forEach((e,t)=>{setTimeout(()=>{h(e=>e.map((e,a)=>a===t?{...e,analyzing:!1}:e))},(t+1)*200)})}},z=async()=>{try{let e=new AbortController,t=setTimeout(()=>e.abort(),2e3),a=await fetch("http://localhost:8000/health",{method:"GET",signal:e.signal});return clearTimeout(t),a.ok}catch(e){return console.log("API不可用:",e),!1}},G=async(e,t)=>{let a=t||Math.random().toString(36).substr(2,9);if(k.current){console.warn("API调用被阻止，已有调用正在进行中: ".concat(O.current));return}k.current=!0,O.current=a;try{if(!await z()){console.log("API不可用，使用模拟数据"),Y();return}let t=new FormData;t.append("file",e,"capture.jpg");let a=await fetch("http://localhost:8000/api/v1/analyze/image",{method:"POST",body:t});if(!a.ok)throw Error("API调用失败: ".concat(a.status));let o=await a.json();if(o.success){f(o.emotion_data);let e=o.analysis_text;try{let t=await fetch("http://localhost:8000/api/v1/generation/generate-from-analysis",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({emotion_data:o.emotion_data,seed:Math.floor(1e6*Math.random())})});if(e+="\n\n"+"━".repeat(80)+"\n",e+=">>> COMFYUI IMAGE GENERATION <<<\n\n",t.ok){let a=await t.json();if(a.success){var n,r;e+="✅ 图像生成成功!\n",e+="\uD83C\uDFA8 生成时间: ".concat(null===(n=a.generation_time)||void 0===n?void 0:n.toFixed(2),"秒\n"),e+="\uD83D\uDCF8 生成图像: ".concat((null===(r=a.images)||void 0===r?void 0:r.length)||0,"张\n"),a.images&&a.images.length>0&&(e+="\n生成的图像:\n",a.images.forEach((t,a)=>{e+="".concat(a+1,". ").concat(t.filename,"\n"),e+="   URL: ".concat(t.url,"\n")}))}else e+="❌ 图像生成失败: ".concat(a.error_message,"\n"),e+="\uD83D\uDCA1 提示: 请检查ComfyUI服务是否正常运行\n"}else e+="❌ 图像生成API调用失败: ".concat(t.status,"\n")}catch(t){console.warn("图像生成失败，但情绪分析成功:",t),e+="❌ 图像生成异常: ".concat(t,"\n")}x(e)}else{let e=">>> API调用失败 <<<\n\n错误信息: ".concat(o.error_message||"未知错误","\n\n请检查后端服务是否正常运行。");x(e),Y()}}catch(e){console.error("API调用异常:",e),x(">>> 网络连接失败 <<<\n\n错误信息: ".concat(e,"\n\n正在使用模拟数据进行演示...")),Y()}finally{k.current=!1,O.current=null}},Y=()=>{let e=[{emotion:"Happy",percentage:40*Math.random()+30,color:"#00ff88"},{emotion:"Sad",percentage:20*Math.random()+5,color:"#0099ff"},{emotion:"Angry",percentage:15*Math.random()+5,color:"#ff0066"},{emotion:"Surprised",percentage:20*Math.random()+10,color:"#ffaa00"},{emotion:"Neutral",percentage:25*Math.random()+15,color:"#888888"},{emotion:"Disgusted",percentage:10*Math.random()+2,color:"#9d4edd"},{emotion:"Fearful",percentage:15*Math.random()+3,color:"#f72585"}];f(e),x([">>> NEURAL NETWORK ANALYSIS COMPLETE <<<","","EMOTIONAL SIGNATURE DETECTED:","━".repeat(80),"","SUBJECT ANALYSIS:","• Primary Emotion: ".concat(e[0].emotion.toUpperCase()),"• Confidence Level: ".concat(Math.floor(e[0].percentage),"%"),"• Secondary Traits: ".concat(e.slice(1,3).map(e=>e.emotion).join(", ")),"","BIOMETRIC DATA:","• Heart Rate Variability: DETECTED","• Micro-expressions: 47 PATTERNS IDENTIFIED","• Facial Symmetry: ANALYZED","• Eye Movement: TRACKED","","PSYCHOLOGICAL PROFILE:","• Stress Indicators: LOW-MODERATE","• Authenticity Score: 87.3%","• Emotional Stability: STABLE","• Cognitive Load: NORMAL","","RECOMMENDATION:","Subject displays genuine emotional responses.","No deception indicators detected.","Emotional state within normal parameters.","","━".repeat(80),"ANALYSIS TIMESTAMP: "+y,"NEURAL NETWORK VERSION: EMOSCAN v2.1.7","STATUS: COMPLETE"].join("\n"))};return(0,n.jsxs)("div",{className:"min-h-screen font-mono overflow-hidden relative transition-colors duration-300 bg-[hsl(var(--emoscan-bg))] text-[hsl(var(--emoscan-text))]",children:[(0,n.jsx)("div",{className:"absolute inset-0 opacity-10",children:(0,n.jsx)("div",{className:"grid grid-cols-20 grid-rows-20 h-full w-full",children:Array.from({length:400}).map((e,t)=>(0,n.jsx)("div",{className:"border border-[hsl(var(--emoscan-grid)/0.2)]"},t))})}),(0,n.jsx)("header",{className:"relative z-10 border-b backdrop-blur-sm transition-colors duration-300 border-[hsl(var(--emoscan-border)/0.3)] bg-[hsl(var(--emoscan-bg)/0.8)]",children:(0,n.jsxs)("div",{className:"flex items-center justify-between px-6 py-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsx)("div",{className:"text-2xl font-bold animate-pulse text-[hsl(var(--emoscan-accent))]",children:"EMOSCAN"}),(0,n.jsx)("div",{className:"text-sm text-[hsl(var(--emoscan-text)/0.7)]",children:"Neural Emotion Analysis System"})]}),(0,n.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,n.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,n.jsx)("div",{className:"w-2 h-2 rounded-full animate-pulse bg-[hsl(var(--emoscan-accent))]"}),(0,n.jsx)("span",{className:"text-xs",children:"SYSTEM ONLINE"})]}),(0,n.jsx)("div",{className:"text-xs text-[hsl(var(--emoscan-text)/0.7)]",children:y}),(0,n.jsx)(s,{})]})]})}),(0,n.jsxs)("div",{className:"flex h-[calc(100vh-80px)] relative z-10",children:[(0,n.jsx)("div",{className:"w-1/3 border-r backdrop-blur-sm p-6 transition-colors duration-300 border-[hsl(var(--emoscan-border)/0.3)] bg-[hsl(var(--emoscan-panel)/0.5)]",children:(0,n.jsxs)("div",{className:"h-full flex flex-col",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold mb-4 text-[hsl(var(--emoscan-accent))]",children:"VISUAL INPUT"}),(0,n.jsxs)("div",{className:"flex-1 relative border rounded-lg overflow-hidden transition-colors duration-300 border-[hsl(var(--emoscan-border)/0.5)] bg-[hsl(var(--emoscan-bg)/0.8)]",children:[(0,n.jsx)("video",{ref:T,autoPlay:!0,muted:!0,className:"w-full h-full object-cover",style:{transform:"scaleX(-1)"}}),(0,n.jsx)("canvas",{ref:D,className:"hidden"}),a&&(0,n.jsx)("div",{className:"absolute left-0 w-full h-0.5 shadow-lg bg-[hsl(var(--emoscan-accent))] shadow-[hsl(var(--emoscan-accent)/0.5)]",style:{top:"".concat(v,"%"),transition:"top 0.05s linear"}}),a&&(0,n.jsxs)("div",{className:"absolute top-4 left-4 flex items-center space-x-2",children:[(0,n.jsx)("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"}),(0,n.jsx)("span",{className:"text-sm text-red-400",children:"RECORDING"})]})]}),(0,n.jsxs)("div",{className:"mt-4 space-y-3",children:[(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,n.jsx)("button",{onClick:()=>j("quick"),className:"py-2 px-3 border rounded-lg text-xs transition-all duration-200 ".concat("quick"===w?"bg-blue-600/30 border-blue-400/50 text-blue-400 shadow-lg shadow-blue-400/20":"bg-gray-600/20 border-gray-400/50 text-gray-400 hover:bg-gray-600/30"),children:"\uD83D\uDE80 QUICK MODE"}),(0,n.jsx)("button",{onClick:()=>j("detailed"),className:"py-2 px-3 border rounded-lg text-xs transition-all duration-200 ".concat("detailed"===w?"bg-orange-600/30 border-orange-400/50 text-orange-400 shadow-lg shadow-orange-400/20":"bg-gray-600/20 border-gray-400/50 text-gray-400 hover:bg-gray-600/30"),children:"\uD83D\uDD0D DETAILED MODE"})]}),(0,n.jsx)("div",{className:"text-xs text-gray-400 text-center",children:"quick"===w?"快速模式：分析最后1张图片 (~5秒)":"详细模式：分析全部5张图片 + 裁判员AI (~20秒)"}),(0,n.jsx)("button",{onClick:F,disabled:a||c,className:"w-full py-3 px-4 bg-green-600/20 border border-green-400/50 rounded-lg text-green-400 hover:bg-green-600/30 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:shadow-lg hover:shadow-green-400/20",children:a?"CAPTURING...":"START SCAN (".concat(w.toUpperCase(),")")}),u.length>0&&(0,n.jsx)("div",{className:"grid grid-cols-5 gap-2",children:u.map(e=>(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("img",{src:e.url||"/placeholder.svg",alt:"Capture ".concat(e.id),className:"w-full h-12 object-cover rounded border border-green-400/30"}),e.analyzing&&(0,n.jsx)("div",{className:"absolute inset-0 bg-cyan-400/20 animate-pulse rounded"})]},e.id))})]})]})}),(0,n.jsx)("div",{className:"w-1/3 border-r backdrop-blur-sm p-6 transition-colors duration-300 border-[hsl(var(--emoscan-border)/0.3)] bg-[hsl(var(--emoscan-panel)/0.5)]",children:(0,n.jsxs)("div",{className:"h-full flex flex-col",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold mb-4 text-[hsl(var(--emoscan-accent))]",children:"EMOTION ANALYSIS"}),c&&(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsxs)("div",{className:"flex justify-between text-sm mb-2",children:[(0,n.jsx)("span",{children:"Processing..."}),(0,n.jsxs)("span",{children:[Math.floor(d),"%"]})]}),(0,n.jsx)("div",{className:"w-full rounded-full h-2 bg-[hsl(var(--muted))]",children:(0,n.jsx)("div",{className:"h-2 rounded-full transition-all duration-200 bg-gradient-to-r from-[hsl(var(--emoscan-accent))] to-[hsl(var(--emoscan-accent))]",style:{width:"".concat(d,"%")}})})]}),(0,n.jsx)("div",{className:"flex-1 space-y-4",children:g.map(e=>(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-sm font-medium",children:e.emotion}),(0,n.jsxs)("span",{className:"text-sm",style:{color:e.color},children:[e.percentage.toFixed(1),"%"]})]}),(0,n.jsx)("div",{className:"w-full rounded-full h-3 overflow-hidden bg-[hsl(var(--muted))]",children:(0,n.jsx)("div",{className:"h-3 rounded-full transition-all duration-1000 ease-out",style:{width:"".concat(e.percentage,"%"),backgroundColor:e.color,boxShadow:"0 0 10px ".concat(e.color,"50")}})})]},e.emotion))}),(0,n.jsx)("div",{className:"mt-6 h-48 border rounded-lg flex items-center justify-center transition-colors duration-300 border-[hsl(var(--emoscan-border)/0.3)] bg-[hsl(var(--emoscan-bg)/0.8)]",children:(0,n.jsx)("div",{className:"relative w-32 h-32",children:(0,n.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 100 100",children:[[20,40,60,80].map(t=>(0,n.jsx)("circle",{cx:"50",cy:"50",r:t/2,fill:"none",stroke:e?"hsl(142 76% 36% / 0.3)":"hsl(220 13% 69% / 0.3)",strokeWidth:"0.5"},t)),g.map((t,a)=>{let r=(a*(360/g.length)-90)*(Math.PI/180),o=50+40*Math.cos(r),s=50+40*Math.sin(r);return(0,n.jsx)("line",{x1:"50",y1:"50",x2:o,y2:s,stroke:e?"hsl(142 76% 36% / 0.3)":"hsl(220 13% 69% / 0.3)",strokeWidth:"0.5"},a)}),(0,n.jsx)("polygon",{points:g.map((e,t)=>{let a=(t*(360/g.length)-90)*(Math.PI/180),n=e.percentage/100*35,r=50+n*Math.cos(a),o=50+n*Math.sin(a);return"".concat(r,",").concat(o)}).join(" "),fill:e?"hsl(142 76% 36% / 0.2)":"hsl(217 91% 60% / 0.2)",stroke:e?"hsl(142 76% 36%)":"hsl(217 91% 60%)",strokeWidth:"1"})]})})})]})}),(0,n.jsx)("div",{className:"w-1/3 backdrop-blur-sm p-6 transition-colors duration-300 bg-[hsl(var(--emoscan-panel)/0.5)]",children:(0,n.jsxs)("div",{className:"h-full flex flex-col",children:[(0,n.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,n.jsx)("h2",{className:"text-lg font-semibold text-[hsl(var(--emoscan-accent))]",children:"AI ANALYSIS OUTPUT"})}),(0,n.jsxs)("div",{ref:C,className:"flex-1 border rounded-lg overflow-y-auto overflow-x-hidden ai-output-container relative transition-colors duration-300 border-[hsl(var(--emoscan-border)/0.3)] bg-[hsl(var(--emoscan-bg)/0.8)]",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[(0,n.jsx)("div",{className:"absolute inset-0 pointer-events-none z-10",style:{background:"linear-gradient(\n                      to bottom,\n                      rgba(var(--emoscan-gradient-color), 0.6) 0%,\n                      rgba(var(--emoscan-gradient-color), 0.3) 8%,\n                      rgba(var(--emoscan-gradient-color), 0.1) 20%,\n                      transparent 30%,\n                      transparent 70%,\n                      rgba(var(--emoscan-gradient-color), 0.1) 80%,\n                      rgba(var(--emoscan-gradient-color), 0.3) 92%,\n                      rgba(var(--emoscan-gradient-color), 0.6) 100%\n                    )",borderRadius:"inherit"}}),(0,n.jsxs)("div",{className:"relative cylindrical-text-container",style:{minHeight:"100%",padding:"40px 16px",textAlign:"center",height:"auto"},children:[(0,n.jsx)("div",{className:"cylindrical-text-display",style:{margin:0,padding:0,lineHeight:"1.8"},children:(E||"Awaiting analysis data...").split("\n").map((e,t)=>(0,n.jsxs)("div",{className:"text-line",style:{marginBottom:"0.2em"},children:[e||"\xa0"," "]},t))}),(A||S&&E)&&(0,n.jsx)("span",{className:"inline-block w-1 h-4 ml-1 bg-[hsl(var(--emoscan-text))] ".concat(S?"opacity-100":"opacity-0"," transition-opacity duration-300"),style:{fontSize:"14px"},children:"|"})]})]})]})})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(4489)),_N_E=e.O()}]);