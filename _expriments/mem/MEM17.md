# MEM17: 反缓存机制与用户需求记忆

## 核心记忆
用户对ComfyUI的缓存机制极度反感，要求每次都生成全新图像，绝不接受缓存结果。

## 用户偏好记忆
1. **强烈反对缓存**：用户明确表示缓存机制"太恶心了"，要求"干掉"
2. **不修改工作流**：用户坚决要求"不要改工作流！"
3. **真实生成需求**：要求"每次！每次都生成新图"，强调真实性
4. **零容忍态度**：对于缓存问题采取零容忍态度

## 技术解决方案记忆
实施了多层反缓存机制：
- `clear_cache()`：清理ComfyUI各种缓存
- `force_cleanup_outputs()`：删除旧输出文件
- 唯一client_id：确保每次请求唯一性
- 强制刷新参数：添加反缓存标识

## 重要原则记忆
1. **用户需求优先**：当用户强烈反对某个机制时，必须彻底解决
2. **不侵入核心**：在不修改工作流的前提下解决问题
3. **多重保障**：单一方法可能不够，需要多层防护
4. **系统性思考**：从多个层面综合解决问题

## 情绪记忆
- 用户对缓存机制表现出强烈的厌恶情绪
- 使用了"恶心"、"干掉"等强烈词汇
- 对解决方案的要求非常坚决和明确

## 技术细节记忆
- ComfyUI的缓存包括：历史记录、队列、模型缓存
- 需要清理的API端点：`/history/clear`、`/queue/clear`、`/free`
- 文件清理模式：删除`ComfyUI_*.png`模式的文件
- 唯一性策略：UUID + 时间戳 + 额外参数

## 应用指导
在未来的开发中：
1. 优先考虑用户的强烈偏好
2. 对于缓存相关功能要特别谨慎
3. 提供彻底的反缓存选项
4. 保持工作流文件的完整性
